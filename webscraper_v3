import re
import time
from webdriver_manager.chrome import ChromeDriverManager
from selenium import webdriver
from selenium.webdriver.chrome.service import Service as ChromeService
from selenium.webdriver.common.by import By
from print_prettier import printyellow


class WebScraper:
    def __init__(self, url):
        self.url = url

        options = webdriver.ChromeOptions()
        options.add_argument('--headless')
        self.driver = webdriver.Chrome(service=ChromeService(
            ChromeDriverManager().install()), options=options)
        self.driver.get(self.url)

    def __enter__(self):
        return self

    def __exit__(self, exc_type, exc_value, traceback):
        self.driver.quit()


class TheVergeScraper(WebScraper):
    def __init__(self):
        super().__init__('https://www.theverge.com/ai-artificial-intelligence')
        self.get_article_links()

    def get_article_links(self):
        article_links = self.driver.find_elements(
            By.XPATH, '//a[@href]')
        links = [link.get_attribute('href') for link in article_links]
        printyellow(links)
        return links


def main():
    with TheVergeScraper() as scraper:
        time.sleep(2)


if __name__ == '__main__':
    main()
